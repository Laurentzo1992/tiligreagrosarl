jQuery(function(t){var e;function i(t){var e=t.find(".tg-widget-repeater-field-items"),i=e.find("li.tg-widget-accordion-item"),o=wp.template("tg-widget-repeater-field-blank");i.length?(t.find(".tg-widget-repeater-field-button").show(),i.length<flashToolkitLocalizeScript.i18n_max_field_entries&&t.find(".tg-widget-repeater-field-button a").removeClass("disabled")):(t.find(".tg-widget-repeater-field-button").hide(),t.find(".tg-widget-repeater-field-blank-state").remove(),e.append(o))}function o(e){e.find(".tg-widget-repeater-field-items").sortable({items:"> li",handle:"> .accordion-top > .accordion-title",cursor:"move",axis:"y",distance:2,opacity:.65,scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,placeholder:"tg-widget-sortable-placeholder",start:function(e,i){var o=i.item.children(".accordion-inside");"block"===o.css("display")&&(i.item.removeClass("open"),o.hide(),t(this).sortable("refreshPositions"))},stop:function(t,e){e.item.removeAttr("style")}})}t(document.body).on("click",".tg-image-upload",function(i){var o=t(this),n=o.parent().find(".tg-media-input"),l=o.parent().parent().find(".tg-media-preview");i.preventDefault(),(e=wp.media.frames.media_file=wp.media({title:o.data("choose"),button:{text:o.data("update")},states:[new wp.media.controller.Library({title:o.data("choose"),library:wp.media.query({type:"image"})})]})).on("select",function(){var t=e.state().get("selection").first().toJSON();n.val(t.url),l.css({display:"none"}).find("img").remove(),l.css({display:"block"}).append('<img src="'+t.url+'">')}),e.open()}),t(document.body).on("click",".tg-media-remove",function(){var e=t(this).closest(".media-uploader");return e.find(".tg-media-input").val(""),e.find(".tg-media-preview").css({display:"none"}).find("img").remove(),!1}),t(document.body).on("flash-toolkit-init-media-preview",function(){t("input.tg-media-input").each(function(){var e=t(this).val(),i=t(this).parent().siblings(".tg-media-preview");""!==e&&(i.find("img.tg-media-preview-default").remove(),i.css({display:"block"}).append('<img src="'+e+'">'))})}).trigger("flash-toolkit-init-media-preview"),t(document.body).on("flash-toolkit-date-picker-init",function(){t("input.flash-datetime-picker").removeClass("hasDatepicker"),t("input.flash-datetime-picker").each(function(){t("input.flash-datetime-picker").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm"})})}).trigger("flash-toolkit-date-picker-init"),t(document.body).on("flash-toolkit-color-picker-init",function(){t(".ft-widget-col:has(.flash-color-picker)").each(function(){t(this).find(".flash-color-picker").wpColorPicker()})}).trigger("flash-toolkit-color-picker-init"),t(document.body).on("panelsopen",function(){t(document.body).trigger("flash-toolkit-date-picker-init"),t(document.body).trigger("flash-toolkit-color-picker-init")}),t(document.body).on("flash-toolkit-init-availability",function(){t("select.icon_chooser").change(function(){"image"===t(this).val()?(t(this).closest("p").next(".show_if_icon").hide(),t(this).closest("p").next().next(".show_if_image").show()):(t(this).closest("p").next(".show_if_icon").show(),t(this).closest("p").next().next(".show_if_image").hide())}).change(),t("select.media_chooser").change(function(){"image"===t(this).val()?(t(this).closest(".widget-content").find(".show_if_image").show(),t(this).closest(".widget-content").find(".show_if_video").closest("p").hide()):(t(this).closest(".widget-content").find(".show_if_image").hide(),t(this).closest(".widget-content").find(".show_if_video").closest("p").show())}).change(),t("select.filter_availability").change(function(){"0"===t(this).val()?t(this).closest(".widget-content").find(".show_if_all_category").closest("p").show():t(this).closest(".widget-content").find(".show_if_all_category").closest("p").hide()}).change(),t("select.availability").change(function(){"latest"===t(this).val()?t(this).closest("p").next("p").hide():t(this).closest("p").next("p").show()}).change(),t("input.availability").change(function(){t(this).is(":checked")?t(this).closest("p").next("p").hide():t(this).closest("p").next("p").show()}).change(),t("select.videoplayer-style").change(function(){"player-background"===t(this).val()?(t(this).closest(".widget-content").find(".videoplayer-icon-style").closest("p").hide(),t(this).closest(".widget-content").find(".videoplayer-btn-fields").closest("p").hide(),t(this).closest(".widget-content").find(".videoplayer-thumbnail").show()):(t(this).closest(".widget-content").find(".videoplayer-icon-style").closest("p").show(),t(this).closest(".widget-content").find(".videoplayer-btn-fields").closest("p").show(),t(this).closest(".widget-content").find(".videoplayer-thumbnail").hide())}).change(),t("select.hero-style-select").on("select2:select",function(){"tg-hero--default"===t(this).val()?(t(this).closest(".widget-content").find(".hero-title-font-select").val("Roboto").trigger("change"),t(this).closest(".widget-content").find(".hero-subtitle-font-select").val("Roboto").trigger("change")):"tg-hero--thinner"===t(this).val()?(t(this).closest(".widget-content").find(".hero-title-font-select").val("Raleway").trigger("change"),t(this).closest(".widget-content").find(".hero-subtitle-font-select").val("Open Sans").trigger("change")):"tg-hero--border"===t(this).val()?(t(this).closest(".widget-content").find(".hero-title-font-select").val("Archivo Black").trigger("change"),t(this).closest(".widget-content").find(".hero-subtitle-font-select").val("Roboto").trigger("change")):"tg-hero--classic"===t(this).val()?(t(this).closest(".widget-content").find(".hero-title-font-select").val("Playfair Display").trigger("change"),t(this).closest(".widget-content").find(".hero-subtitle-font-select").val("PT Serif").trigger("change")):"tg-hero--cursive"===t(this).val()&&(t(this).closest(".widget-content").find(".hero-title-font-select").val("Lobster").trigger("change"),t(this).closest(".widget-content").find(".hero-subtitle-font-select").val("Roboto").trigger("change"))}).change()}).trigger("flash-toolkit-init-availability"),t(document.body).on("flash-toolkit-tabs",function(){t(document.body).on("click",".flash-tab-title-container .flash-tab-title",function(e){e.preventDefault(),t(this).addClass("active"),t(this).siblings().removeClass("active");var i=t(this).attr("href");t(this).parent().siblings(".flash-toolkit-tab-content-container").find(".flash-toolkit-tab").css("display","none"),t(this).parent().siblings(".flash-toolkit-tab-content-container").find(i).fadeIn()})}).trigger("flash-toolkit-tabs"),t(document.body).on("flash-toolkit-init-accordion-title",function(){t(".tg-widget-repeater-field-items").children("li").each(function(){var e=t('input[id*="-title"]',this).val()||"";e&&(e=": "+e.replace(/<[^<>]+>/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;")),t(this).children(".accordion-top").children(".accordion-title").children().children(".in-accordion-title").html(e)})}).trigger("flash-toolkit-init-accordion-title"),t(document.body).on("click",".tg-widget-repeater-field-add",function(e){if(e.preventDefault(),t(this).is(".disabled"))window.alert(flashToolkitLocalizeScript.i18n_max_field_message);else{var i=t(this).parents(".widget-content"),o=i.find("li.tg-widget-accordion-item").length+1,n=i.find(".tg-widget-repeater-field-items").data("widget_id"),l=wp.template("tg-widget-repeater-field-"+n);i.find("li.tg-widget-accordion-item").each(function(e,i){o===parseInt(t(i).data("id").replace(/[^0-9\.]/g,""),10)&&o++}),i.find(".tg-widget-repeater-field-button").show(),i.find(".tg-widget-repeater-field-blank-state").remove(),i.find(".tg-widget-repeater-field-items").append(l({field_id:o})),o>=flashToolkitLocalizeScript.i18n_max_field_entries&&i.find(".tg-widget-repeater-field-button a").addClass("disabled"),t(document.body).trigger("flash-enhanced-select-init")}}),t(document.body).on("click.accordion-toggle",function(e){var o,n,l,s=t(e.target);s.parents(".accordion-top").length&&!s.parents("#available-fields").length?((n=(o=s.closest("li.tg-widget-accordion-item")).children(".accordion-inside")).is(":hidden")?(o.addClass("open"),n.slideDown("fast")):n.slideUp("fast",function(){o.attr("style",""),o.removeClass("open")}),e.preventDefault()):s.hasClass("accordion-control-close")?((o=s.closest("li.tg-widget-accordion-item")).children(".accordion-inside").slideUp("fast",function(){o.attr("style",""),o.removeClass("open")}),e.preventDefault()):s.hasClass("accordion-control-remove")&&(o=s.closest("li.tg-widget-accordion-item"),l=s.parents(".widget[id*=themegrill_flash], .widget-content"),o.remove(),i(l),e.preventDefault())}),t(document.body).on("panelsopen",function(e){var n=t(e.target);if(!n.has(".tg-widget-repeater-field-items"))return!1;n.addClass("widget-content"),i(n),o(n),t(document.body).trigger("flash-enhanced-select-init"),t(document.body).trigger("flash-toolkit-init-availability"),t(document.body).trigger("flash-toolkit-init-media-preview"),t(document.body).trigger("flash-toolkit-init-accordion-title")}),t(document.body).on("click",".so-close",function(){t(document.body).trigger("flash-toolkit-init-accordion-title")}),t(document.body).on("click","div.widget[id*=themegrill_flash] .widget-title, div.widget[id*=themegrill_flash] .widget-title-action",function(){t(this).parents("#available-widgets").length||(i(t(this).parents(".widget[id*=themegrill_flash]")),o(t(this).parents(".widget[id*=themegrill_flash]")))}),t(document).on("widget-added widget-updated",function(e,n){n.is("[id*=themegrill_flash]")&&(e.preventDefault(),i(n),o(n),t(document.body).trigger("flash-enhanced-select-init"),t(document.body).trigger("flash-toolkit-init-availability"),t(document.body).trigger("flash-toolkit-init-media-preview"),t(document.body).trigger("flash-toolkit-init-accordion-title"),t(document.body).trigger("flash-toolkit-date-picker-init"),t(document.body).trigger("flash-toolkit-color-picker-init"))})});